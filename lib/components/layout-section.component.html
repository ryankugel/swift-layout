<div #section class="layout-pane-section layout-component" [ngStyle]="style"
     [ngClass]="{
       'layout-horizontal': orientation === 'horizontal',
       'layout-vertical': orientation === 'vertical'
     }">

  <!-- First pane -->
  @if( firstPaneTemplate ) {
    <div #firstPane class="layout-pane-content layout-component"
         [@toggle]="{ value: firstPaneVisible, params: { paneSize: getPaneSize( 'first' ) } }">
      <ng-container *ngTemplateOutlet="firstPaneTemplate"></ng-container>
    </div>

    <ng-container [ngTemplateOutlet]="gutterTemplate"
                  [ngTemplateOutletContext]="{
                    'pane': 'first',
                    'paneVisible': firstPaneVisible
                  }"></ng-container>
  }

  <!-- Middle pane -->
  <div #middlePane class="layout-pane-content middle-pane layout-component">
    <ng-container *ngTemplateOutlet="middlePaneTemplate"></ng-container>
  </div>

  <!-- Last pane -->
  @if( lastPaneTemplate ) {
    <ng-container [ngTemplateOutlet]="gutterTemplate"
                  [ngTemplateOutletContext]="{
                    'pane': 'last',
                    'paneVisible': lastPaneVisible
                  }"></ng-container>

    <div #lastPane class="layout-pane-content layout-component"
         [@toggle]="{ value: lastPaneVisible, params: { paneSize: getPaneSize( 'last' ) } }">
      <ng-container *ngTemplateOutlet="lastPaneTemplate"></ng-container>
    </div>
  }

</div>

<!-- Template for the resize bar -->
<ng-template #gutterTemplate let-pane="pane" let-paneVisible="paneVisible">
  <div #gutter [class]="getGutterClass( pane )" role="separator"
       [ngClass]="{ 'gutter-collapsed': !paneVisible }"
       (mousedown)="onGutterMouseDown( $event, pane, paneVisible )">
    <button type="button" class="layout-pane-gutter-toggle layout-component"
            (click)="onGutterHandleClick( pane )" [ngStyle]="getGutterStyle()">
      @if( orientation === "horizontal" ) {
        <svg class="gutter-icon horizontal" [ngClass]="{ 'last': pane === 'last' }" height="20" width="12" viewBox="0 -960 720 800">
          @if( paneVisible ) {
            <path d="M 287.02701,-560.00018 660,-974.0012 546.48649,-1100 60,-560.00018 546.48649,-20 660,-146.00017 Z" />
          }
          @else {
            <path d="M 432.97299,-560.00018 60,-974.0012 173.51351,-1100 660,-560.00018 173.51351,-20 60,-146.00017 Z" />
          }
        </svg>
      }
      @else {
        <svg class="gutter-icon vertical" [ngClass]="{ 'last': pane === 'last' }" height="12" width="20" viewBox="0 -960 1200 480">
          @if( paneVisible ) {
            <path d="M 600.00018,-792.97299 1014.0012,-420 1140,-533.51351 600.00018,-1020 60,-533.51351 186.00017,-420 Z" />
          }
          @else {
            <path d="M 600.00018,-647.02701 1014.0012,-1020 1140,-906.48649 600.00018,-420 60,-906.48649 186.00017,-1020 Z" />
          }
        </svg>
      }
    </button>
  </div>
</ng-template>
